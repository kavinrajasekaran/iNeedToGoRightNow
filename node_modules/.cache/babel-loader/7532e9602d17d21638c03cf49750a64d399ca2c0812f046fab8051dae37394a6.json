{"ast":null,"code":"import _slicedToArray from \"/Users/kavinrajasekaran/Documents/UCMerced/CurrentClasses/CSE108/iNeedToGoRightNow/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/Users/kavinrajasekaran/Documents/UCMerced/CurrentClasses/CSE108/iNeedToGoRightNow/src/components/MapView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { GoogleMap, Marker, InfoWindow, useLoadScript } from '@react-google-maps/api';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MapView(_ref) {\n  _s();\n  var _this = this;\n  var setRestaurants = _ref.setRestaurants,\n    setPosition = _ref.setPosition;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    position = _useState2[0],\n    setLocalPosition = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    restaurants = _useState4[0],\n    setLocalRestaurants = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    selectedRestaurant = _useState6[0],\n    setSelectedRestaurant = _useState6[1];\n  var codes = JSON.parse(localStorage.getItem('codes')) || {};\n\n  // Google Maps libraries to load\n  var libraries = ['places'];\n  var mapContainerStyle = {\n    height: '100vh',\n    width: '100%'\n  };\n  var _useLoadScript = useLoadScript({\n      googleMapsApiKey: 'YOUR_GOOGLE_MAPS_API_KEY',\n      // Replace with your API key\n      libraries: libraries\n    }),\n    isLoaded = _useLoadScript.isLoaded,\n    loadError = _useLoadScript.loadError;\n  useEffect(function () {\n    navigator.geolocation.getCurrentPosition(function (pos) {\n      var coords = {\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude\n      };\n      setLocalPosition(coords);\n      setPosition(coords);\n    });\n  }, [setPosition]);\n  useEffect(function () {\n    if (position) {\n      var service = new window.google.maps.places.PlacesService(document.createElement('div'));\n      var request = {\n        location: position,\n        radius: 1000,\n        type: ['restaurant']\n      };\n      service.nearbySearch(request, function (results, status) {\n        if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n          var restaurantData = results.map(function (place) {\n            return {\n              id: place.place_id,\n              name: place.name,\n              position: place.geometry.location\n            };\n          });\n          setLocalRestaurants(restaurantData);\n          setRestaurants(restaurantData);\n        }\n      });\n    }\n  }, [position, setRestaurants]);\n  var handleMarkerClick = function handleMarkerClick(restaurant) {\n    setSelectedRestaurant(restaurant);\n  };\n  if (loadError) return 'Error loading maps';\n  if (!isLoaded) return 'Loading Maps';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    children: position && /*#__PURE__*/_jsxDEV(GoogleMap, {\n      mapContainerStyle: mapContainerStyle,\n      zoom: 15,\n      center: position,\n      children: [/*#__PURE__*/_jsxDEV(Marker, {\n        position: position\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), restaurants.map(function (restaurant) {\n        return /*#__PURE__*/_jsxDEV(Marker, {\n          position: restaurant.position,\n          onClick: function onClick() {\n            return handleMarkerClick(restaurant);\n          }\n        }, restaurant.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, _this);\n      }), selectedRestaurant && /*#__PURE__*/_jsxDEV(InfoWindow, {\n        position: selectedRestaurant.position,\n        onCloseClick: function onCloseClick() {\n          return setSelectedRestaurant(null);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: selectedRestaurant.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this), codes[selectedRestaurant.id] ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Restroom Code: \", codes[selectedRestaurant.id]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No code available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: function onClick() {\n              var code = prompt('Enter restroom code:');\n              if (code) {\n                codes[selectedRestaurant.id] = code;\n                localStorage.setItem('codes', JSON.stringify(codes));\n                setSelectedRestaurant(null);\n              }\n            },\n            children: \"Add/Edit Code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(MapView, \"TExze12C7lRqxyXWLT0Xahw7II4=\", false, function () {\n  return [useLoadScript];\n});\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","GoogleMap","Marker","InfoWindow","useLoadScript","axios","jsxDEV","_jsxDEV","MapView","_ref","_s","_this","setRestaurants","setPosition","_useState","_useState2","_slicedToArray","position","setLocalPosition","_useState3","_useState4","restaurants","setLocalRestaurants","_useState5","_useState6","selectedRestaurant","setSelectedRestaurant","codes","JSON","parse","localStorage","getItem","libraries","mapContainerStyle","height","width","_useLoadScript","googleMapsApiKey","isLoaded","loadError","navigator","geolocation","getCurrentPosition","pos","coords","lat","latitude","lng","longitude","service","window","google","maps","places","PlacesService","document","createElement","request","location","radius","type","nearbySearch","results","status","PlacesServiceStatus","OK","restaurantData","map","place","id","place_id","name","geometry","handleMarkerClick","restaurant","children","zoom","center","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onCloseClick","code","prompt","setItem","stringify","_c","$RefreshReg$"],"sources":["/Users/kavinrajasekaran/Documents/UCMerced/CurrentClasses/CSE108/iNeedToGoRightNow/src/components/MapView.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { GoogleMap, Marker, InfoWindow, useLoadScript } from '@react-google-maps/api';\nimport axios from 'axios';\n\nfunction MapView({ setRestaurants, setPosition }) {\n  const [position, setLocalPosition] = useState(null);\n  const [restaurants, setLocalRestaurants] = useState([]);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n  const codes = JSON.parse(localStorage.getItem('codes')) || {};\n\n  // Google Maps libraries to load\n  const libraries = ['places'];\n  const mapContainerStyle = {\n    height: '100vh',\n    width: '100%',\n  };\n\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: 'YOUR_GOOGLE_MAPS_API_KEY', // Replace with your API key\n    libraries,\n  });\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition((pos) => {\n      const coords = { lat: pos.coords.latitude, lng: pos.coords.longitude };\n      setLocalPosition(coords);\n      setPosition(coords);\n    });\n  }, [setPosition]);\n\n  useEffect(() => {\n    if (position) {\n      const service = new window.google.maps.places.PlacesService(document.createElement('div'));\n      const request = {\n        location: position,\n        radius: 1000,\n        type: ['restaurant'],\n      };\n\n      service.nearbySearch(request, (results, status) => {\n        if (status === window.google.maps.places.PlacesServiceStatus.OK) {\n          const restaurantData = results.map((place) => ({\n            id: place.place_id,\n            name: place.name,\n            position: place.geometry.location,\n          }));\n          setLocalRestaurants(restaurantData);\n          setRestaurants(restaurantData);\n        }\n      });\n    }\n  }, [position, setRestaurants]);\n\n  const handleMarkerClick = (restaurant) => {\n    setSelectedRestaurant(restaurant);\n  };\n\n  if (loadError) return 'Error loading maps';\n  if (!isLoaded) return 'Loading Maps';\n\n  return (\n    <div id=\"map\">\n      {position && (\n        <GoogleMap mapContainerStyle={mapContainerStyle} zoom={15} center={position}>\n          <Marker position={position} />\n\n          {restaurants.map((restaurant) => (\n            <Marker\n              key={restaurant.id}\n              position={restaurant.position}\n              onClick={() => handleMarkerClick(restaurant)}\n            />\n          ))}\n\n          {selectedRestaurant && (\n            <InfoWindow\n              position={selectedRestaurant.position}\n              onCloseClick={() => setSelectedRestaurant(null)}\n            >\n              <div>\n                <h3>{selectedRestaurant.name}</h3>\n                {codes[selectedRestaurant.id] ? (\n                  <p>Restroom Code: {codes[selectedRestaurant.id]}</p>\n                ) : (\n                  <p>No code available</p>\n                )}\n                <button\n                  onClick={() => {\n                    const code = prompt('Enter restroom code:');\n                    if (code) {\n                      codes[selectedRestaurant.id] = code;\n                      localStorage.setItem('codes', JSON.stringify(codes));\n                      setSelectedRestaurant(null);\n                    }\n                  }}\n                >\n                  Add/Edit Code\n                </button>\n              </div>\n            </InfoWindow>\n          )}\n        </GoogleMap>\n      )}\n    </div>\n  );\n}\n\nexport default MapView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
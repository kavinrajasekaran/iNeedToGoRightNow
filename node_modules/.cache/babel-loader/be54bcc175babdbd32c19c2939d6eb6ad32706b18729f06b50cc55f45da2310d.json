{"ast":null,"code":"var _jsxFileName = \"/Users/kavinrajasekaran/Documents/UCMerced/CurrentClasses/CSE108/iNeedToGoRightNow/src/components/MapView.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MapView({\n  setRestaurants,\n  setPosition\n}) {\n  _s();\n  const [position, setLocalPosition] = useState(null);\n  const [restaurants, setLocalRestaurants] = useState([]);\n  const codes = JSON.parse(localStorage.getItem('codes')) || {};\n\n  // Fix marker icon issues\n  delete L.Icon.Default.prototype._getIconUrl;\n  L.Icon.Default.mergeOptions({\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n  });\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(pos => {\n      const coords = [pos.coords.latitude, pos.coords.longitude];\n      setLocalPosition(coords);\n      setPosition(coords);\n    });\n  }, [setPosition]);\n  useEffect(() => {\n    if (position) {\n      const query = `[out:json];node[amenity=restaurant](around:1000,${position[0]},${position[1]});out;`;\n      fetch(`https://overpass-api.de/api/interpreter?data=${encodeURIComponent(query)}`).then(res => res.json()).then(data => {\n        const restaurantData = data.elements.map(el => ({\n          id: el.id,\n          name: el.tags.name || 'Unnamed Restaurant',\n          lat: el.lat,\n          lon: el.lon\n        }));\n        setLocalRestaurants(restaurantData);\n        setRestaurants(restaurantData);\n      });\n    }\n  }, [position, setRestaurants]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    children: position && /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: position,\n      zoom: 15,\n      style: {\n        height: '100vh',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: position,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"Your Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), restaurants.map(restaurant => /*#__PURE__*/_jsxDEV(Marker, {\n        position: [restaurant.lat, restaurant.lon],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: restaurant.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 17\n          }, this), codes[restaurant.id] ? `Restroom Code: ${codes[restaurant.id]}` : 'No code available']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this)\n      }, restaurant.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(MapView, \"aTyWRPvzs+mX+ixlOk3rA3tYRkg=\");\n_c = MapView;\nexport default MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Popup","L","jsxDEV","_jsxDEV","MapView","setRestaurants","setPosition","_s","position","setLocalPosition","restaurants","setLocalRestaurants","codes","JSON","parse","localStorage","getItem","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","query","fetch","encodeURIComponent","then","res","json","data","restaurantData","elements","map","el","id","name","tags","lat","lon","children","center","zoom","style","height","width","url","fileName","_jsxFileName","lineNumber","columnNumber","restaurant","_c","$RefreshReg$"],"sources":["/Users/kavinrajasekaran/Documents/UCMerced/CurrentClasses/CSE108/iNeedToGoRightNow/src/components/MapView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\nfunction MapView({ setRestaurants, setPosition }) {\n  const [position, setLocalPosition] = useState(null);\n  const [restaurants, setLocalRestaurants] = useState([]);\n  const codes = JSON.parse(localStorage.getItem('codes')) || {};\n\n  // Fix marker icon issues\n  delete L.Icon.Default.prototype._getIconUrl;\n  L.Icon.Default.mergeOptions({\n    iconRetinaUrl:\n      'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n    iconUrl:\n      'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n    shadowUrl:\n      'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n  });\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition((pos) => {\n      const coords = [pos.coords.latitude, pos.coords.longitude];\n      setLocalPosition(coords);\n      setPosition(coords);\n    });\n  }, [setPosition]);\n\n  useEffect(() => {\n    if (position) {\n      const query = `[out:json];node[amenity=restaurant](around:1000,${position[0]},${position[1]});out;`;\n      fetch(\n        `https://overpass-api.de/api/interpreter?data=${encodeURIComponent(\n          query\n        )}`\n      )\n        .then((res) => res.json())\n        .then((data) => {\n          const restaurantData = data.elements.map((el) => ({\n            id: el.id,\n            name: el.tags.name || 'Unnamed Restaurant',\n            lat: el.lat,\n            lon: el.lon,\n          }));\n          setLocalRestaurants(restaurantData);\n          setRestaurants(restaurantData);\n        });\n    }\n  }, [position, setRestaurants]);\n\n  return (\n    <div id=\"map\">\n      {position && (\n        <MapContainer\n          center={position}\n          zoom={15}\n          style={{ height: '100vh', width: '100%' }}\n        >\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          <Marker position={position}>\n            <Popup>Your Location</Popup>\n          </Marker>\n          {restaurants.map((restaurant) => (\n            <Marker\n              key={restaurant.id}\n              position={[restaurant.lat, restaurant.lon]}\n            >\n              <Popup>\n                <strong>{restaurant.name}</strong>\n                <br />\n                {codes[restaurant.id]\n                  ? `Restroom Code: ${codes[restaurant.id]}`\n                  : 'No code available'}\n              </Popup>\n            </Marker>\n          ))}\n        </MapContainer>\n      )}\n    </div>\n  );\n}\n\nexport default MapView;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}